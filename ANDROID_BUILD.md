# Todo App - Android Build

This project has been configured to build as an Android application using Capacitor. Your existing React web app will run inside a native Android container.

## Prerequisites

1. **Node.js and npm** - Already installed
2. **Android Studio** - Download from https://developer.android.com/studio
3. **Java Development Kit (JDK) 17** - Required by Android Studio

## Building the Android App

### Step 1: Build the React App

```bash
npm run build
```

### Step 2: Sync with Android

```bash
npm run android:sync
```

This command builds your React app and copies it to the Android project.

### Step 3: Open in Android Studio

```bash
npm run android:open
```

This opens Android Studio with your Android project.

### Step 4: Run on Device/Emulator

From Android Studio:

1. Click on "Build" → "Make Project" to build
2. Click the green "Run" button to install on a connected device or emulator

Or use the command line:

```bash
npm run android:run
```

## Quick Commands

- `npm run android:sync` - Build React app and sync to Android
- `npm run android:open` - Open Android project in Android Studio
- `npm run android:run` - Build, sync, and run on device/emulator

## Firebase Configuration

Your Firebase configuration is already set up in the web app. The Android app will use the same Firebase project. Make sure your `.env` file contains:

```env
VITE_FIREBASE_APIKEY=your_api_key
VITE_FIREBASE_AUTHDOMAIN=your_auth_domain
VITE_FIREBASE_PROJECTID=your_project_id
VITE_FIREBASE_STORAGEBUCKET=your_storage_bucket
VITE_FIREBASE_MESSAGINGSENDERID=your_messaging_sender_id
VITE_FIREBASE_APPID=your_app_id
VITE_FIREBASE_MEASUREMENT_ID=your_measurement_id
```

## Customization

### App Icon and Splash Screen

Place your app icons in:

- `android/app/src/main/res/mipmap-*/ic_launcher.png`

### App Name

Edit `android/app/src/main/res/values/strings.xml`:

```xml
<string name="app_name">Todo App</string>
```

### Package Name

The app uses package name: `com.todoapp.app`
To change it, edit `capacitor.config.ts` and rebuild.

## Development Workflow

1. Make changes to your React code in `src/`
2. Run `npm run android:sync` to rebuild and sync
3. The app will hot-reload in the emulator/device

## Troubleshooting

### "Could not find installation of Android SDK"

Install Android Studio and configure the SDK path.

### "JAVA_HOME is not set"

Set JAVA_HOME to Android Studio's JDK:

```powershell
$env:JAVA_HOME = "C:\Program Files\Android\Android Studio\jbr"
$env:PATH = "$env:JAVA_HOME\bin;$env:PATH"
```

Then retry the build command.

### "Duplicate class kotlin..." errors

This was fixed in the project. If you see it again, sync in Android Studio: **File** → **Sync Project with Gradle Files**

### Build errors in Android Studio

1. Go to File → Invalidate Caches and Restart
2. Run Build → Clean Project
3. Run Build → Rebuild Project

### First time Gradle sync takes forever

Normal! First sync downloads all dependencies (5-15 minutes). Subsequent builds are much faster.

### Firebase not working

Ensure you're using `https` for the Android scheme in `capacitor.config.ts`.

## Building APK for Direct Installation

If you want to install the APK directly on your phone without Google Play:

### Method 1: Via Android Studio

1. **Build** → **Build Bundle(s) / APK(s)** → **Build APK(s)**
2. Wait for "BUILD SUCCESSFUL"
3. Click **locate** to find: `app-debug.apk`
4. Transfer to phone and install

### Method 2: Command Line

```powershell
# Set JAVA_HOME first
$env:JAVA_HOME = "C:\Program Files\Android\Android Studio\jbr"

# Build APK
cd android
.\gradlew assembleDebug
```

APK location: `android\app\build\outputs\apk\debug\app-debug.apk`

### Installing on Phone

1. Transfer APK to phone (USB/email/cloud)
2. On phone: Settings → Security → Enable "Install from unknown sources"
3. Tap the APK file to install

## Project Structure

```
todo-app/
├── src/                  # React source code
├── dist/                 # Built web app (generated)
├── android/              # Native Android project (generated by Capacitor - DO NOT commit to Git)
├── capacitor.config.ts   # Capacitor configuration
└── package.json          # NPM scripts
```

**Note**: The `android/` folder is auto-generated and already in `.gitignore`. Don't commit it to Git.

## Cloning This Project

If someone clones your repo, they need to:

```bash
npm install
npx cap add android
npm run android:sync
```

This regenerates the Android project.

## Publishing to Google Play Store

1. Generate a signed APK/Bundle in Android Studio
2. Follow Google Play Console instructions to publish
3. See: https://capacitorjs.com/docs/android/deploying-to-google-play

## Learn More

- [Capacitor Documentation](https://capacitorjs.com/docs)
- [Capacitor Android Guide](https://capacitorjs.com/docs/android)
- [Capacitor Plugins](https://capacitorjs.com/docs/plugins)
